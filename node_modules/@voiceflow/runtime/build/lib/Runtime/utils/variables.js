"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.mapStores = exports.saveCombinedVariables = exports.createCombinedVariables = void 0;
const Store_1 = __importDefault(require("../Store"));
exports.createCombinedVariables = (global, local) => {
    return Store_1.default.merge(global, local);
};
exports.saveCombinedVariables = (combined, global, local) => {
    const updatedLocal = {};
    const updatedGlobal = {};
    combined.forEach(({ key, value }) => {
        if (local.has(key)) {
            updatedLocal[key] = value;
        }
        else if (global.has(key)) {
            updatedGlobal[key] = value;
        }
        else {
            // leftover/newly introduced variables saved locally to prevent pollution of global space
            updatedLocal[key] = value;
        }
    });
    local.merge(updatedLocal);
    global.merge(updatedGlobal);
};
exports.mapStores = (map, from, to) => {
    to.produce((draft) => {
        map.forEach(([currentVal, newVal]) => {
            draft[newVal] = from.get(currentVal);
        });
    });
};
//# sourceMappingURL=variables.js.map