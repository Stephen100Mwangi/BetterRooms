"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resultMappings = exports.ENDPOINTS_MAP = void 0;
const general_types_1 = require("@voiceflow/general-types");
const googleSheets_1 = require("@voiceflow/general-types/build/nodes/googleSheets");
const zapier_1 = require("@voiceflow/general-types/build/nodes/zapier");
// integrations repos endpoints based on action
exports.ENDPOINTS_MAP = {
    [general_types_1.IntegrationType.GOOGLE_SHEETS]: {
        [googleSheets_1.GoogleSheetsActionType.RETRIEVE_DATA]: '/google_sheets/retrieve_data',
        [googleSheets_1.GoogleSheetsActionType.CREATE_DATA]: '/google_sheets/create_data',
        [googleSheets_1.GoogleSheetsActionType.UPDATE_DATA]: '/google_sheets/update_data',
        [googleSheets_1.GoogleSheetsActionType.DELETE_DATA]: '/google_sheets/delete_data',
    },
    [general_types_1.IntegrationType.ZAPIER]: {
        [zapier_1.ZapierActionType.START_A_ZAP]: '/zapier/trigger',
    },
};
exports.resultMappings = (node, resultData) => {
    switch (node.selected_integration) {
        case general_types_1.IntegrationType.GOOGLE_SHEETS: {
            const newVariables = {};
            if (node.action_data && node.action_data.mapping) {
                node.action_data.mapping.forEach((m) => {
                    const col = m.arg1;
                    const toVar = m.arg2;
                    // FIXME: possible bug, col is number based on the general types
                    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore
                    // @ts-ignore
                    const isRowNumber = col === 'row_number';
                    newVariables[toVar] = isRowNumber ? resultData._cell_location.row : resultData[col];
                });
            }
            return newVariables;
        }
        case general_types_1.IntegrationType.CUSTOM_API: {
            return resultData;
        }
        case general_types_1.IntegrationType.ZAPIER:
        default: {
            return {};
        }
    }
};
//# sourceMappingURL=utils.js.map